<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="Front-End Final Project" />
    <meta
      name="keywords"
      content="HTML, CSS, JavaScript, Front-End, Website, UI"
    />
    <meta name="author" content="Gvantsa Nadiradze" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Your Courses - eLearn</title>
    <link rel="stylesheet" href="styles/reset.css" />
    <link rel="stylesheet" href="styles/style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Kumbh+Sans:wght@400;700;800&family=Krona+One&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <a href="./index.html" class="logo">eLearn</a>

      <input type="checkbox" name="nav-burger-btn" id="nav-burger-btn" />

      <label class="nav-burger menu-icon" for="nav-burger-btn"
        ><i class="fas fa-bars"></i
      ></label>

      <nav class="nav">
        <ul class="nav-ul">
          <li><a href="./index.html" class="nav-link">Home</a></li>
          <span class="nav-separator">|</span>
          <li><a href="./courses.html" class="nav-link">Courses</a></li>
          <span class="nav-separator">|</span>
          <li>
            <a href="./login.html" id="navUserLink" class="nav-link">Login</a>
          </li>
          <li>
            <a href="./cart.html" class="cart-icon cart-icon-mobile menu-icon"
              ><i class="fas fa-shopping-cart"></i
            ></a>
          </li>
        </ul>
      </nav>

      <a href="./cart.html" class="cart-icon menu-icon">
        <i class="fas fa-shopping-cart"></i>
      </a>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <div class="container">
        <!-- Page Title -->
        <h1 class="page-title">Your Courses</h1>

        <div class="logout-btn">
          <button class="btn btn-white" onclick="logoutUser()">Log Out</button>
        </div>

        <!-- Cart Items -->
        <div class="cart-items" id="cartItems">
          <!-- Cart items will be generated by JavaScript -->
        </div>
      </div>
    </main>

    <script src="./scripts/script.js"></script>
    <script>
      // Initialize cart on page load
      function initCart() {
        const cartItemsContainer = document.getElementById("cartItems");
        const logoutBtn = document.querySelector(".logout-btn");
        const isLoggedIn = localStorage.getItem("currentUser");

        if (isLoggedIn) {
          logoutBtn.style.display = "block";
        }

        if (!cartItemsContainer) return;

        let cartItems = JSON.parse(localStorage.getItem("cart")) || [];

        if (cartItems.length === 0) {
          cartItemsContainer.innerHTML =
            '<p style="color: #999; text-align: center; grid-column: 1/-1; padding: 2rem;">No courses in your cart yet.</p>';
          return;
        }

        cartItemsContainer.innerHTML = cartItems
          .map(
            (item, index) => `
        <div class="cart-item">
          <div class="cart-item-name">${item.name}</div>
          <button class="remove-btn" onclick="removeFromCart(${index})" title="Remove from cart">
            <i class="fas fa-trash"></i>
          </button>
        </div>
      `,
          )
          .join("");
      }

      function removeFromCart(index) {
        let cartItems = JSON.parse(localStorage.getItem("cart")) || [];
        cartItems.splice(index, 1);
        localStorage.setItem("cart", JSON.stringify(cartItems));
        initCart();
      }

      document.addEventListener("DOMContentLoaded", function () {
        initCart();
        updateUserName();
      });
    </script>
  </body>
</html>
